<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Towers of Hanoi</title>
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css">
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>
</head>
<body style="font-family: Arial, sans-serif; background-color: #f4f4f4; padding: 20px;">

    <h1>Towers of Hanoi</h1>
    <p>If the page works, a <b>black terminal box</b> will appear below in about 10 seconds.</p>

    <script type="py" worker terminal>
class Stack:
    def __init__(self, name):
        self.name = name
        self.items = []

    def push(self, value):
        self.items.append(value)

    def pop(self):
        if self.get_size() > 0:
            return self.items.pop()
        return None

    def peek(self):
        if self.get_size() > 0:
            return self.items[-1]
        return None

    def get_size(self):
        return len(self.items)

    def get_name(self):
        return self.name

    def print_items(self):
        print(f"{self.name} Stack: {self.items}")

print("--- SYSTEM: PYTHON INITIALIZED ---")
print("Let's play Towers of Hanoi!!")

# We are setting this to 3 so it doesn't ask for a pop-up!
num_disks = 3
print(f"Playing with {num_disks} disks.")

stacks = []
left_stack = Stack("Left")
middle_stack = Stack("Middle")
right_stack = Stack("Right")
stacks += [left_stack, middle_stack, right_stack]

for disk in range(num_disks, 0, -1):
    left_stack.push(disk)

num_optimal_moves = (2 ** num_disks) - 1
print(f"\nThe fastest you can solve this is in {num_optimal_moves} moves")

def get_input(prompt):
    choices = ['L', 'M', 'R']
    while True:
        # This input WILL appear inside the black box, not a pop-up!
        user_input = input(prompt).upper()
        if user_input in choices:
            return stacks[choices.index(user_input)]
        print("Invalid choice. Please type L, M, or R.")

num_user_moves = 0
while right_stack.get_size() != num_disks:
    print("\n--- Current State ---")
    for stack in stacks:
        stack.print_items()
    
    from_stack = get_input("Move FROM (L/M/R): ")
    to_stack = get_input("Move TO (L/M/R): ")

    if from_stack.get_size() == 0:
        print("Invalid Move: Source stack is empty.")
    elif to_stack.get_size() == 0 or from_stack.peek() < to_stack.peek():
        disk = from_stack.pop()
        to_stack.push(disk)
        num_user_moves += 1
    else:
        print("Invalid Move: Cannot place larger disk on smaller disk.")

print(f"\nVictory! Total moves: {num_user_moves}")
    </script>

</body>
</html>

