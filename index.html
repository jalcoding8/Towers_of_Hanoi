<!DOCTYPE html>
<html>
<head>
    <title>Towers of Hanoi</title>
    <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
    <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
</head>
<body style="padding: 20px; font-family: sans-serif;">

    <h1>Towers of Hanoi</h1>
    <p>The game is loading... please wait a few seconds.</p>

    <div id="game-output" style="background: #222; color: #0f0; padding: 20px; border-radius: 8px; font-family: monospace; white-space: pre;"></div>

    <py-script>
class Stack:
    def __init__(self, name):
        self.name = name
        self.items = []

    def push(self, value):
        self.items.append(value)

    def pop(self):
        return self.items.pop() if self.items else None

    def peek(self):
        return self.items[-1] if self.items else None

    def get_size(self):
        return len(self.items)

    def print_items(self):
        # We use Element().write to put text on the screen
        output = f"{self.name} Stack: {self.items}"
        pyscript.write("game-output", output + "\n", append=True)

# Start the game
pyscript.write("game-output", "Let's play Towers of Hanoi!!\n")

# To keep it simple for the first load, let's hardcode 3 disks
num_disks = 3
left_stack = Stack("Left")
middle_stack = Stack("Middle")
right_stack = Stack("Right")

for disk in range(num_disks, 0, -1):
    left_stack.push(disk)

pyscript.write("game-output", f"Starting with {num_disks} disks...\n", append=True)
left_stack.print_items()
middle_stack.print_items()
right_stack.print_items()

pyscript.write("game-output", "\n(To play, use the browser console or wait for input update!)", append=True)
    </py-script>

</body>
</html>
